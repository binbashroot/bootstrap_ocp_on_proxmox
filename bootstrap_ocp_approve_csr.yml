---

- name: Approve CSR
  ansible.builtin.shell: |
    set -o pipefail
    oc get csr -o name | xargs oc adm certificate approve
  register: __csr_approval
  changed_when: false

- name: Pause to allow workers to catch up first pass
  ansible.builtin.pause:
    seconds: 120

- name: Approve CSRs again
  ansible.builtin.shell: |
    set -o pipefail
    oc get csr -o name | xargs oc adm certificate approve
  register: __csr_approval
  changed_when: false

- name: Pause to allow workers to catch up 2nd pass
  ansible.builtin.pause:
    seconds: 120

...
